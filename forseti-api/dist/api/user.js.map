{"version":3,"sources":["../../server/api/user.js"],"names":["config","db","userApi","all","get","req","res","json","username","ensureAuthenticated","console","log","user","next","isAuthenticated","redirect"],"mappings":";;;;;;;AAcA;;AAGA;;AACA;;;;AAlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;eAQe,wBAGT;AAAA,MAFFA,MAEE,QAFFA,MAEE;AAAA,MADFC,EACE,QADFA,EACE;AACF,MAAIC,OAAO,GAAG,sBAAd;AAEAA,EAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ,EAAiB,uBAAjB;AAEA;;;;AAGAD,EAAAA,OAAO,CAACE,GAAR,CAAY,GAAZ,EAAiB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AACjCA,IAAAA,GAAG,CAACC,IAAJ,CAAS;AACLC,MAAAA,QAAQ,EAAE;AADL,KAAT;AAGH,GAJD;AAMA;;;;AAGAN,EAAAA,OAAO,CAACE,GAAR,CAAY,oBAAZ,EAAkCK,mBAAlC,EAAuD,UAAUJ,GAAV,EAAeC,GAAf,EAAoB;AACvEI,IAAAA,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACO,IAAhB;AACAN,IAAAA,GAAG,CAACC,IAAJ,CAAS,gBAAT;AACH,GAHD;AAKA,SAAOL,OAAP;AACH,C;;;;AAED,SAASO,mBAAT,CAA6BJ,GAA7B,EAAkCC,GAAlC,EAAuCO,IAAvC,EAA6C;AACzC,MAAIR,GAAG,CAACS,eAAJ,EAAJ,EAA2B;AACvB;AACA,WAAOD,IAAI,EAAX;AACH;;AAEDH,EAAAA,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACO,IAAhB,EANyC,CAOzC;;AACAN,EAAAA,GAAG,CAACS,QAAJ,CAAa,aAAb;AACH","sourcesContent":["// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {\n    Router\n} from 'express';\nimport ForsetiService from '../services/forseti-service';\nimport cors from 'cors';\n\nexport default ({\n    config,\n    db\n}) => {\n    let userApi = Router();\n\n    userApi.all('*', cors());\n\n    /**\n     * @desc returns the username\n     */\n    userApi.get('/', function (req, res) {\n        res.json({\n            username: 'Me'\n        });\n    });\n\n    /**\n     * @desc returns the username\n     */\n    userApi.get('/AuthenticatedUser', ensureAuthenticated, function (req, res) {\n        console.log(req.user)\n        res.json('access granted');\n    });\n\n    return userApi;\n}\n\nfunction ensureAuthenticated(req, res, next) {\n    if (req.isAuthenticated()) {\n        // req.user is available for use here\n        return next();\n    }\n\n    console.log(req.user);\n    // denied. redirect to login\n    res.redirect('/auth/login')\n}"],"file":"user.js"}