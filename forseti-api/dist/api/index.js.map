{"version":3,"sources":["../../server/api/index.js"],"names":["config","db","api","use","get","req","res","console","log","session","json","version","textToEncrypt","CryptoService","encrypt","encryptedText","decrypt","decryptedText"],"mappings":";;;;;;;AAcA;;AAGA;;AAGA;;AACA;;AAEA;;;;AAvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;eAae,wBAGT;AAAA,MAFLA,MAEK,QAFLA,MAEK;AAAA,MADLC,EACK,QADLA,EACK;AACL,MAAIC,GAAG,GAAG,sBAAV,CADK,CAGL;;AACAA,EAAAA,GAAG,CAACC,GAAJ,CAAQ,UAAR,EAAoB,yBAAQ;AAC3BH,IAAAA,MAAM,EAANA,MAD2B;AAE3BC,IAAAA,EAAE,EAAFA;AAF2B,GAAR,CAApB,EAJK,CASL;;AACAC,EAAAA,GAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiB,sBAAK;AACrBH,IAAAA,MAAM,EAANA,MADqB;AAErBC,IAAAA,EAAE,EAAFA;AAFqB,GAAL,CAAjB,EAVK,CAeL;AACA;AACA;AACA;AAEA;;AACAC,EAAAA,GAAG,CAACE,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1BC,IAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,OAAhB;AAEAH,IAAAA,GAAG,CAACI,IAAJ,CAAS;AACRC,MAAAA,OAAO,EAAPA;AADQ,KAAT;AAGA,GAND;AAWA;AAEA;;AACAT,EAAAA,GAAG,CAACE,GAAJ,CAAQ,MAAR,EAAgB,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACf;AACIM,YAAAA,aAFW,GAEK,MAFL;AAAA;AAAA,4CAIWC,0BAAcC,OAAd,CACzB,wEADyB,EACiD,cADjD,CAJX;;AAAA;AAIXC,YAAAA,aAJW;AAOfT,YAAAA,GAAG,CAACI,IAAJ,CAAS;AACRK,cAAAA,aAAa,EAAbA;AADQ,aAAT;;AAPe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB,EAnCK,CA+CL;;AACAb,EAAAA,GAAG,CAACE,GAAJ,CAAQ,MAAR,EAAgB,kBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CACWO,0BAAcG,OAAd,CAAsB,cAAtB,EAAsC,aAAtC,CADX;;AAAA;AACXC,YAAAA,aADW;AAGfX,YAAAA,GAAG,CAACI,IAAJ,CAAS;AACRO,cAAAA,aAAa,EAAbA;AADQ,aAAT;;AAHe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;AAQA,SAAOf,GAAP;AACA,C","sourcesContent":["// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {\n\tversion\n} from '../../package.json';\nimport {\n\tRouter\n} from 'express';\nimport forseti from './forseti';\nimport user from './user';\n\nimport CryptoService from '../services/crypto-service';\n\nexport default ({\n\tconfig,\n\tdb\n}) => {\n\tlet api = Router();\n\n\t// mount resources\n\tapi.use('/forseti', forseti({\n\t\tconfig,\n\t\tdb\n\t}));\n\n\t// mount resources\n\tapi.use('/user', user({\n\t\tconfig,\n\t\tdb\n\t}));\n\n\t// api.use('/auth', auth({\n\t// \tconfig,\n\t// \tdb\n\t// }));\n\n\t// perhaps expose some API metadata at the root\n\tapi.get('/', (req, res) => {\n\t\tconsole.log(req.session);\n\n\t\tres.json({\n\t\t\tversion\n\t\t});\n\t});\n\n\n\n\n\t/* Testing */\n\n\t// perhaps expose some API metadata at the root\n\tapi.get('/enc', async (req, res) => {\n\t\t// enc / dec\n\t\tlet textToEncrypt = \"Haha\";\n\n\t\tlet encryptedText = await CryptoService.encrypt(\n\t\t\t'/Users/garrettwong/Git/forseti-visualizer/forseti-api/dockersource.env', 'asdf.env.enc');\n\n\t\tres.json({\n\t\t\tencryptedText\n\t\t});\n\t});\n\n\t// perhaps expose some API metadata at the root\n\tapi.get('/dec', async (req, res) => {\n\t\tlet decryptedText = await CryptoService.decrypt('asdf.env.enc', 'orginal.env');\n\n\t\tres.json({\n\t\t\tdecryptedText\n\t\t});\n\t});\n\n\treturn api;\n}"],"file":"index.js"}